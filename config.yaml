# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# âš™ï¸  GENERAL SETTINGS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
mode: DRY_RUN          # DRY_RUN | LIVE
data_source: STATIC    # STATIC | LIVE (candle data source)
poll_seconds: 120     # how often bot checks signals
exchange: NSE

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“ˆ  UNIVERSE SETTINGS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
universe_mode: STATIC   # STATIC | DYNAMIC

# Static universe for quick testing
universe_static:
  - RELIANCE

# Dynamic universe (auto filter)
universe_dynamic:
  top_n: 25
  run_preopen: true
  preopen_time: "09:05"      # build watchlist after pre-open
  refresh_midday: "12:00"    # rebuild midday
  candidate_list:
    - RELIANCE
    - TCS
    - HDFCBANK
    - INFY
    - HCLTECH
    - LT
    - SBIN
    - ICICIBANK
    - AXISBANK
    - KOTAKBANK
    - ITC
    - TATAMOTORS
    - TITAN
    - JSWSTEEL
    - ULTRACEMCO
    - BAJFINANCE
    - HDFCLIFE
    - BHARTIARTL
    - ASIANPAINT
    - MARUTI
    - NESTLEIND
    - SUNPHARMA
    - DIVISLAB
    - ONGC
    - ADANIENT
    - GRASIM
    - LTIM
    - POWERGRID
    - COALINDIA
    - HAL
  filters:
    min_price: 100
    max_price: 5000
    min_turnover_cr: 50
    atr_pct_min: 1.0
    atr_pct_max: 5.0
    rsi_min: 40
    rsi_max: 80
    exclude_t2t: false
  scoring:
    weight_trend: 0.4
    weight_rsi: 0.3
    weight_turnover: 0.2
    weight_volatility: 0.1

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ’°  RISK MANAGEMENT
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
qty:
  default_buy: 1
  default_sell: 1
  per_symbol: {}

risk:
  max_daily_drawdown_pct: 2.0   # stop trading after this loss
  per_trade_risk_pct: 1.0       # position size cap

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ›‘  STOP-LOSS SETTINGS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
stop:
  mode: ATR        # ATR | PCT
  pct: 1.5         # if mode=PCT, stop = 1.5% below entry
  atr_mult: 1.5    # if mode=ATR, stop = ATR * 1.5 below entry
  trailing: true   # raise stop as price moves up
  min_tick: 0.05   # round stop to nearest tick

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“Š  INDICATORS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
indicators:
  sma_windows: [20, 50, 200]
  rsi_period: 14
  bb_window: 20
  bb_stddev: 2.0
  atr_period: 14

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ§   LLM DECISION ENGINE
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
llm:
  # choose provider: OPENAI | CLAUDE
  provider: OPENAI

  # model options:
  # - for OpenAI: gpt-4o-mini, gpt-4-turbo, etc.
  # - for Claude: claude-3.5-sonnet, claude-3-opus, claude-2.1, etc.
  model: gpt-4o-mini

  max_tokens: 300
  temperature: 0.1

  # system prompt â€” ensures the LLM outputs strict JSON
  system: |
    You are a disciplined equities trader. Analyze the indicators and output STRICT JSON only.
    Avoid natural language. Only BUY, SELL or HOLD based on signals.
    Respect stop-loss, avoid overtrading, and act conservatively on low confidence.

  # schema for JSON output
  schema: |
    {
      "action": "BUY|SELL|HOLD",
      "reason": "string",
      "confidence": 0.0_to_1.0,
      "qty": "integer_optional"
    }

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ”  FORENSIC CHECKER
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
forensic:
  enabled: true                      # enable/disable forensic analysis
  data_source: MOCK                  # MOCK (test data) or LIVE (real APIs)
  lookback_days: 365                 # how far back to analyze (days)
  min_risk_score: 40.0               # minimum score to trigger alert (0-100)

  # Enable/disable specific checks
  check_management: true             # detect management changes & resignations
  check_auditor: true                # detect auditor changes or qualifications
  check_related_party: true          # analyze related party transactions
  check_promoter_pledge: true        # track pledge of promoter shares
  check_regulatory: true             # monitor regulatory actions & penalties
  check_insider_trading: true        # analyze insider trading patterns
  check_restatements: true           # detect financial restatements
  check_governance: true             # monitor governance score degradation

  promoter_pledge_threshold: 50.0    # alert if pledge exceeds this % (0-100)
  output_dir: logs/forensic          # where to save reports
  cache_dir: cache/forensic          # where to cache API responses
  cache_ttl_hours: 24                # cache time-to-live in hours

  # Enable/disable data sources (only for LIVE mode)
  enable_nse: true                   # NSE India API
  enable_bse: true                   # BSE India API
  enable_sebi: true                  # SEBI insider trading & regulatory data
  enable_screener: true              # Screener.in for financials & shareholding

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“¦  LOGGING / FILES
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
logs:
  base_dir: logs
  rotate_days: 5     # compress .txt logs older than 5 days
