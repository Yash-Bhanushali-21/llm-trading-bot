# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# âš™ï¸  GENERAL SETTINGS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
mode: DRY_RUN          # DRY_RUN | LIVE
data_source: STATIC    # STATIC | LIVE (candle data source)
poll_seconds: 120     # how often bot checks signals
exchange: NSE

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“ˆ  UNIVERSE SETTINGS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
universe_mode: STATIC   # STATIC | DYNAMIC

# Static universe for quick testing
# Leave empty to enable PEAD discovery across broad NSE universe (200+ stocks)
# PEAD will scan Nifty 50, Next 50, Midcap, and Smallcap to find sudden earnings growth
universe_static: []

# Dynamic universe (auto filter)
universe_dynamic:
  top_n: 25
  run_preopen: true
  preopen_time: "09:05"      # build watchlist after pre-open
  refresh_midday: "12:00"    # rebuild midday
  candidate_list:
    - RELIANCE
    - TCS
    - HDFCBANK
    - INFY
    - HCLTECH
    - LT
    - SBIN
    - ICICIBANK
    - AXISBANK
    - KOTAKBANK
    - ITC
    - TATAMOTORS
    - TITAN
    - JSWSTEEL
    - ULTRACEMCO
    - BAJFINANCE
    - HDFCLIFE
    - BHARTIARTL
    - ASIANPAINT
    - MARUTI
    - NESTLEIND
    - SUNPHARMA
    - DIVISLAB
    - ONGC
    - ADANIENT
    - GRASIM
    - LTIM
    - POWERGRID
    - COALINDIA
    - HAL
  filters:
    min_price: 100
    max_price: 5000
    min_turnover_cr: 50
    atr_pct_min: 1.0
    atr_pct_max: 5.0
    rsi_min: 40
    rsi_max: 80
    exclude_t2t: false
  scoring:
    weight_trend: 0.4
    weight_rsi: 0.3
    weight_turnover: 0.2
    weight_volatility: 0.1

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ’°  RISK MANAGEMENT
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
qty:
  default_buy: 1
  default_sell: 1
  per_symbol: {}

risk:
  max_daily_drawdown_pct: 2.0   # stop trading after this loss
  per_trade_risk_pct: 1.0       # position size cap

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ›‘  STOP-LOSS SETTINGS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
stop:
  mode: ATR        # ATR | PCT
  pct: 1.5         # if mode=PCT, stop = 1.5% below entry
  atr_mult: 1.5    # if mode=ATR, stop = ATR * 1.5 below entry
  trailing: true   # raise stop as price moves up
  min_tick: 0.05   # round stop to nearest tick

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“Š  INDICATORS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
indicators:
  sma_windows: [20, 50, 200]
  rsi_period: 14
  bb_window: 20
  bb_stddev: 2.0
  atr_period: 14

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ§   LLM DECISION ENGINE
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
llm:
  # choose provider: OPENAI | CLAUDE
  provider: OPENAI

  # model options:
  # - for OpenAI: gpt-4o-mini, gpt-4-turbo, etc.
  # - for Claude: claude-3.5-sonnet, claude-3-opus, claude-2.1, etc.
  model: gpt-4o-mini

  max_tokens: 300
  temperature: 0.1

  # system prompt â€” ensures the LLM outputs strict JSON
  system: |
    You are a disciplined equities trader. Analyze the indicators and output STRICT JSON only.
    Avoid natural language. Only BUY, SELL or HOLD based on signals.
    Respect stop-loss, avoid overtrading, and act conservatively on low confidence.

  # schema for JSON output
  schema: |
    {
      "action": "BUY|SELL|HOLD",
      "reason": "string",
      "confidence": 0.0_to_1.0,
      "qty": "integer_optional"
    }

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“ˆ  PEAD RESEARCH MODULE
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pead:
  enabled: true

  # PEAD time window (days since earnings announcement)
  min_days_since_earnings: 1
  max_days_since_earnings: 60    # PEAD effect typically within 60 days

  # Minimum composite score threshold (0-100)
  # Only companies with this score or higher will qualify
  min_composite_score: 40         # can be overridden by PEAD_MIN_SCORE in .env

  # Minimum thresholds for individual metrics
  min_earnings_surprise: 0        # minimum earnings surprise % (can be negative)
  min_revenue_growth: -10         # minimum YoY revenue growth %
  min_eps_growth: 0               # minimum YoY EPS growth %

  # NLP enhancement (based on Quantpedia research)
  enable_nlp: false               # Enable NLP sentiment analysis (experimental)

  # Scoring component weights
  # NOTE: When enable_nlp=false, traditional weights should sum to 1.0
  # NOTE: When enable_nlp=true, all weights (including NLP) should sum to 1.0
  weights:
    # Traditional PEAD factors (sum = 1.0 when NLP disabled)
    earnings_surprise: 0.25       # weight for earnings surprise score
    revenue_surprise: 0.15        # weight for revenue surprise score
    earnings_growth: 0.20         # weight for YoY EPS growth score
    revenue_growth: 0.15          # weight for YoY revenue growth score
    margin_expansion: 0.10        # weight for profit margin expansion score
    consistency: 0.10             # weight for consecutive beats score
    revenue_acceleration: 0.05    # weight for QoQ revenue acceleration score

    # NLP-enhanced factors (only used when enable_nlp=true)
    # When enabling NLP, reduce traditional weights proportionally to fit NLP weights
    sentiment: 0.00               # weight for overall management sentiment
    tone_divergence: 0.00         # weight for tone-results alignment
    linguistic_quality: 0.00      # weight for certainty/clarity/forward-looking

  # Data source configuration
  data_source: LIVE               # MOCK | LIVE (LIVE uses Yahoo Finance)
  api_key_env: EARNINGS_API_KEY   # environment variable for API key (not required for Yahoo Finance)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“¦  LOGGING / FILES
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
logs:
  base_dir: logs
  rotate_days: 5     # compress .txt logs older than 5 days
